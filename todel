here is code snippets related to recursion depth implementation:

void	render_rayColor(t_vec *color, t_ray *ray, t_scene *scene, int recursion_depth)
{
	t_hitRec	rec;

	if (!recursion_depth)
		return ;

	if (univ_hit(ray, &scene->univ, &rec)) //assumes tmin/max defined in throwray only
		lp_shade(color, &rec, ray, scene, recursion_depth);
	else
		vec_fillVec(color, 0, 0, 0);
}


and in the lambert phong module:

void	lp_shade_mirror(t_vec *color, t_hitRec *rec, t_ray *ray, t_scene *scene, int recursion_depth)
{
	t_vec	reflection_dir;
	t_ray	reflection_ray;
	t_vec	tmp;	

	// r = d - 2(d.n)n
	vec_scale(&tmp, vec_dot(&ray->dir, &rec->normal) * 2.0, &rec->normal);
	vec_subs(&reflection_dir, &ray->dir, &tmp);
	ray_fillRay(&reflection_ray, rec->p, reflection_dir);

	//recursive call
	render_rayColor(color, &reflection_ray, scene, --recursion_depth); 
}

void	lp_shade(t_vec *color, t_hitRec *rec, t_ray *ray, t_scene *scene, int recursion_depth)
{
	if (rec->mat == MATTE_TYPE)
		lp_shade_matte(color, rec, ray, scene);
	if (rec->mat == MIRROR_TYPE)
		lp_shade_mirror(color, rec, ray, scene, recursion_depth);
	if (rec->mat == PLASTIC_TYPE)
		lp_shade_plastic(color, rec, ray, scene);
}

Is this implementatoin of recursion depth stop correct


note: HERE IS HOW I DEFINED THE MAX RECURSION DEPTH
